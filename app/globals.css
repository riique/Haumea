@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design System Tokens - Minimalista */
@layer base {
  :root, .light {
    /* Backgrounds - Light Mode */
    --bg-primary: 0 0% 100%;
    --bg-secondary: 0 0% 98%;
    --bg-tertiary: 220 14% 98%;
    --bg-hover: 220 14% 96%;
    --bg-active: 239 84% 97%;
    
    /* Borders */
    --border-default: 214 32% 91%;
    --border-light: 220 13% 96%;
    --border-accent: 231 84% 85%;
    --border-focus: 239 84% 67%;
    
    /* Text */
    --text-primary: 220 9% 7%;
    --text-secondary: 215 14% 42%;
    --text-tertiary: 218 11% 65%;
    --text-accent: 239 84% 55%;
    
    /* Accent Colors */
    --accent-primary: 239 84% 67%;
    --accent-hover: 239 84% 55%;
    --accent-light: 239 84% 97%;
    --success: 142 71% 45%;
    --warning: 38 92% 50%;
    --error: 0 72% 51%;
    
    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.10);
    --shadow-focus: 0 0 0 4px rgba(99, 102, 241, 0.15);

    /* Semantic Tokens */
    --color-background: var(--bg-primary);
    --color-foreground: var(--text-primary);
    --color-card: var(--bg-primary);
    --color-card-foreground: var(--text-primary);
    --color-primary: var(--accent-primary);
    --color-primary-foreground: 0 0% 100%;
    --color-secondary: var(--bg-tertiary);
    --color-secondary-foreground: var(--text-primary);
    --color-accent: var(--success);
    --color-accent-foreground: 0 0% 100%;
    --color-muted: var(--bg-secondary);
    --color-muted-foreground: var(--text-secondary);
    --color-border: var(--border-default);
    --color-input: var(--border-default);
    --color-ring: var(--accent-primary);
    --color-destructive: var(--error);
    --color-destructive-foreground: 0 0% 100%;
    
    /* Border Radius */
    --radius-lg: 1rem;
    --radius-md: 0.5rem;
    --radius-sm: 0.25rem;
  }

  /* Dark Mode */
  .dark {
    --bg-primary: 222 47% 7%;
    --bg-secondary: 222 47% 10%;
    --bg-tertiary: 220 40% 13%;
    --bg-hover: 217 33% 17%;
    --bg-active: 239 48% 15%;
    
    --border-default: 217 33% 17%;
    --border-light: 222 47% 11%;
    --border-accent: 239 48% 30%;
    --border-focus: 239 84% 67%;
    
    --text-primary: 210 40% 98%;
    --text-secondary: 218 11% 65%;
    --text-tertiary: 215 14% 42%;
    --text-accent: 239 84% 80%;
    
    --accent-primary: 239 84% 67%;
    --accent-hover: 239 84% 75%;
    --accent-light: 239 48% 15%;

    --color-background: var(--bg-primary);
    --color-foreground: var(--text-primary);
    --color-card: var(--bg-secondary);
    --color-card-foreground: var(--text-primary);
    --color-primary: var(--accent-primary);
    --color-secondary: var(--bg-tertiary);
    --color-muted: var(--bg-tertiary);
    --color-muted-foreground: var(--text-secondary);
    --color-border: var(--border-default);
    --color-input: var(--border-default);
  }

  /* Dracula Theme */
  .dracula {
    /* Backgrounds - Mais ricos e vibrantes */
    --bg-primary: 230 15% 15%;      /* Mais escuro e profundo */
    --bg-secondary: 230 15% 18%;    /* Ajuste proporcional */
    --bg-tertiary: 232 14% 25%;     /* Menos acinzentado */
    --bg-hover: 232 14% 28%;        /* Mais sutil */
    --bg-active: 265 45% 22%;       /* Roxo mais saturado */
    
    /* Borders - Mais definidas */
    --border-default: 232 14% 30%;
    --border-light: 231 15% 25%;
    --border-accent: 265 80% 55%;
    --border-focus: 265 95% 75%;
    
    /* Text - Branco limpo e moderno */
    --text-primary: 0 0% 98%;       /* Branco puro, sem amarelo */
    --text-secondary: 225 30% 60%;  /* Azul mais claro e vibrante */
    --text-tertiary: 232 14% 50%;   /* Mais legível */
    --text-accent: 265 89% 82%;     /* Roxo mais brilhante */
    
    /* Accent Colors - Mais saturados */
    --accent-primary: 265 95% 75%;  /* Roxo Drácula vibrante */
    --accent-hover: 265 95% 82%;    /* Hover mais claro */
    --accent-light: 265 50% 20%;    /* Fundo roxo mais rico */
    
    /* Success/Warning/Error usando cores Drácula */
    --success: 135 94% 65%;         /* Green #50fa7b */
    --warning: 31 100% 71%;         /* Orange #ffb86c */
    --error: 0 100% 67%;            /* Red #ff5555 */

    /* Semantic tokens */
    --color-background: var(--bg-primary);
    --color-foreground: var(--text-primary);
    --color-card: var(--bg-secondary);
    --color-card-foreground: var(--text-primary);
    --color-primary: var(--accent-primary);
    --color-primary-foreground: 230 15% 15%;
    --color-secondary: var(--bg-tertiary);
    --color-secondary-foreground: var(--text-primary);
    --color-accent: var(--success);
    --color-accent-foreground: 230 15% 15%;
    --color-muted: var(--bg-tertiary);
    --color-muted-foreground: var(--text-secondary);
    --color-border: var(--border-default);
    --color-input: var(--border-default);
    --color-ring: var(--accent-primary);
    --color-destructive: var(--error);
    --color-destructive-foreground: 0 0% 98%;
  }
}

/* Font Families - Map user selections to CSS variables */
:root {
  --font-family-inter: var(--font-inter), system-ui, -apple-system, sans-serif;
  --font-family-space-grotesk: var(--font-space-grotesk), system-ui, -apple-system, sans-serif;
  --font-family-roboto: var(--font-roboto), system-ui, -apple-system, sans-serif;
  --font-family-open-sans: var(--font-open-sans), system-ui, -apple-system, sans-serif;
  --font-family-lato: var(--font-lato), system-ui, -apple-system, sans-serif;
  --font-family-merriweather: var(--font-merriweather), Georgia, serif;
  --font-family-georgia: Georgia, 'Times New Roman', Times, serif;
  --font-family-jetbrains-mono: var(--font-jetbrains-mono), 'Courier New', monospace;
  --font-family-fira-code: var(--font-fira-code), 'Courier New', monospace;
  --font-family-source-code-pro: var(--font-source-code-pro), 'Courier New', monospace;
}

/* Base Styles */
* {
  border-color: var(--color-border);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

/* Custom Animations */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-in-from-right {
  from {
    transform: translateX(1rem);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-from-left {
  from {
    transform: translateX(-1rem);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-from-bottom {
  from {
    transform: translateY(1.25rem);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-in-from-bottom-large {
  from {
    transform: translateY(2rem);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-in {
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fade-in;
}

.slide-in-from-right-4 {
  animation-name: slide-in-from-right;
}

.slide-in-from-left-4 {
  animation-name: slide-in-from-left;
}

.slide-in-from-bottom-2 {
  animation-name: slide-in-from-bottom;
}

.slide-in-from-bottom-4 {
  animation-name: slide-in-from-bottom-large;
}

.duration-200 {
  animation-duration: 200ms;
}

.duration-300 {
  animation-duration: 300ms;
}

.skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--bg-secondary)) 0%,
    hsl(var(--bg-hover)) 50%,
    hsl(var(--bg-secondary)) 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-feature-settings: "rlig" 1, "calt" 1;
}

a {
  color: inherit;
  text-decoration: none;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--color-muted);
}

::-webkit-scrollbar-thumb {
  background: var(--color-primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(263 70% 45%);
}

/* LaTeX/KaTeX Styling */
.markdown-body .katex {
  font-size: 1.1em;
  color: hsl(var(--text-primary));
}

/* Style KaTeX errors to be less obtrusive */
.markdown-body .katex-error {
  color: hsl(var(--error));
  font-size: 0.9em;
  font-family: monospace;
  padding: 0.25rem 0.5rem;
  background: hsl(var(--error)) / 0.1;
  border-radius: 0.25rem;
  border: 1px solid hsl(var(--error)) / 0.3;
}

.markdown-body .katex-display {
  margin: 1.5rem 0;
  padding: 1rem;
  background: hsl(var(--bg-tertiary));
  border: 1px solid hsl(var(--border-default));
  border-radius: var(--radius-md);
  overflow-x: auto;
  overflow-y: hidden;
}

.markdown-body .katex-display > .katex {
  text-align: center;
  display: block;
}

/* Dark mode specific LaTeX styling */
.dark .markdown-body .katex {
  color: hsl(var(--text-primary));
}

.dark .markdown-body .katex-display {
  background: hsl(var(--bg-tertiary));
  border-color: hsl(var(--border-default));
}

/* Adjust math colors for dark mode */
.dark .markdown-body .katex .mord,
.dark .markdown-body .katex .mop,
.dark .markdown-body .katex .mbin,
.dark .markdown-body .katex .mrel,
.dark .markdown-body .katex .mopen,
.dark .markdown-body .katex .mclose,
.dark .markdown-body .katex .mpunct,
.dark .markdown-body .katex .minner {
  color: hsl(var(--text-primary));
}

/* Inline math styling */
.markdown-body p .katex {
  display: inline-block;
  margin: 0 0.2em;
}

/* Ensure scrollability for long equations */
.markdown-body .katex-display {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--accent-primary)) hsl(var(--bg-tertiary));
}

.markdown-body .katex-display::-webkit-scrollbar {
  height: 6px;
}

.markdown-body .katex-display::-webkit-scrollbar-track {
  background: hsl(var(--bg-tertiary));
}

.markdown-body .katex-display::-webkit-scrollbar-thumb {
  background: hsl(var(--accent-primary));
  border-radius: 3px;
}

.markdown-body .katex-display::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--accent-hover));
}

/* Syntax Highlighting - Dual Theme Support */
/* Light Mode - GitHub inspired */
.light .hljs {
  background: hsl(var(--bg-tertiary));
  color: hsl(var(--text-primary));
}

.light .hljs-comment,
.light .hljs-quote {
  color: #6a737d;
  font-style: italic;
}

.light .hljs-keyword,
.light .hljs-selector-tag,
.light .hljs-addition {
  color: #d73a49;
}

.light .hljs-number,
.light .hljs-string,
.light .hljs-meta .hljs-string,
.light .hljs-literal,
.light .hljs-doctag,
.light .hljs-regexp {
  color: #032f62;
}

.light .hljs-title,
.light .hljs-section,
.light .hljs-name,
.light .hljs-selector-id,
.light .hljs-selector-class {
  color: #6f42c1;
}

.light .hljs-attribute,
.light .hljs-attr,
.light .hljs-variable,
.light .hljs-template-variable,
.light .hljs-class .hljs-title,
.light .hljs-type {
  color: #e36209;
}

.light .hljs-symbol,
.light .hljs-bullet,
.light .hljs-subst,
.light .hljs-meta,
.light .hljs-meta .hljs-keyword,
.light .hljs-link {
  color: #005cc5;
}

.light .hljs-built_in,
.light .hljs-deletion {
  color: #b31d28;
}

.light .hljs-formula {
  background: hsl(var(--bg-hover));
}

.light .hljs-emphasis {
  font-style: italic;
}

.light .hljs-strong {
  font-weight: 700;
}

/* Dark Mode - GitHub Dark inspired */
.dark .hljs {
  background: hsl(var(--bg-tertiary));
  color: hsl(var(--text-primary));
}

.dark .hljs-comment,
.dark .hljs-quote {
  color: #8b949e;
  font-style: italic;
}

.dark .hljs-keyword,
.dark .hljs-selector-tag,
.dark .hljs-addition {
  color: #ff7b72;
}

.dark .hljs-number,
.dark .hljs-string,
.dark .hljs-meta .hljs-string,
.dark .hljs-literal,
.dark .hljs-doctag,
.dark .hljs-regexp {
  color: #a5d6ff;
}

.dark .hljs-title,
.dark .hljs-section,
.dark .hljs-name,
.dark .hljs-selector-id,
.dark .hljs-selector-class {
  color: #d2a8ff;
}

.dark .hljs-attribute,
.dark .hljs-attr,
.dark .hljs-variable,
.dark .hljs-template-variable,
.dark .hljs-class .hljs-title,
.dark .hljs-type {
  color: #ffa657;
}

.dark .hljs-symbol,
.dark .hljs-bullet,
.dark .hljs-subst,
.dark .hljs-meta,
.dark .hljs-meta .hljs-keyword,
.dark .hljs-link {
  color: #79c0ff;
}

.dark .hljs-built_in,
.dark .hljs-deletion {
  color: #ffa198;
}

.dark .hljs-formula {
  background: hsl(var(--bg-hover));
}

.dark .hljs-emphasis {
  font-style: italic;
}

.dark .hljs-strong {
  font-weight: 700;
}

/* Dracula Theme - Syntax Highlighting */
.dracula .hljs {
  background: hsl(var(--bg-tertiary));
  color: hsl(var(--text-primary));
}

.dracula .hljs-comment,
.dracula .hljs-quote {
  color: #6272a4; /* Comment */
  font-style: italic;
}

.dracula .hljs-keyword,
.dracula .hljs-selector-tag,
.dracula .hljs-addition {
  color: #ff79c6; /* Pink */
}

.dracula .hljs-number,
.dracula .hljs-string,
.dracula .hljs-meta .hljs-string,
.dracula .hljs-literal,
.dracula .hljs-doctag,
.dracula .hljs-regexp {
  color: #f1fa8c; /* Yellow */
}

.dracula .hljs-title,
.dracula .hljs-section,
.dracula .hljs-name,
.dracula .hljs-selector-id,
.dracula .hljs-selector-class {
  color: #50fa7b; /* Green */
}

.dracula .hljs-attribute,
.dracula .hljs-attr,
.dracula .hljs-variable,
.dracula .hljs-template-variable,
.dracula .hljs-class .hljs-title,
.dracula .hljs-type {
  color: #8be9fd; /* Cyan */
}

.dracula .hljs-symbol,
.dracula .hljs-bullet,
.dracula .hljs-subst,
.dracula .hljs-meta,
.dracula .hljs-meta .hljs-keyword,
.dracula .hljs-link {
  color: #8be9fd; /* Cyan */
}

.dracula .hljs-built_in,
.dracula .hljs-deletion {
  color: #ff5555; /* Red */
}

.dracula .hljs-formula {
  background: hsl(var(--bg-hover));
}

.dracula .hljs-emphasis {
  font-style: italic;
}

.dracula .hljs-strong {
  font-weight: 700;
}

/* Dracula - LaTeX/KaTeX styling */
.dracula .markdown-body .katex {
  color: hsl(var(--text-primary));
}

.dracula .markdown-body .katex-display {
  background: hsl(var(--bg-tertiary));
  border-color: hsl(var(--border-default));
}

.dracula .markdown-body .katex .mord,
.dracula .markdown-body .katex .mop,
.dracula .markdown-body .katex .mbin,
.dracula .markdown-body .katex .mrel,
.dracula .markdown-body .katex .mopen,
.dracula .markdown-body .katex .mclose,
.dracula .markdown-body .katex .mpunct,
.dracula .markdown-body .katex .minner {
  color: hsl(var(--text-primary));
}
